:root{
  --bg1:#0b1430; --bg2:#4b1f7a; --bg3:#b0156d;
  --tubeW: 18vw; --glassGlow: rgba(255,255,255,.35);
  --accent:#9b6bff; --text:#fff;
  --safeTop: 10vh; --safeBot: 20vh; /* место под док */
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;font-family:ui-rounded,system-ui,Segoe UI,Roboto,Arial}
#bg{position:fixed;inset:0;background:linear-gradient(180deg,var(--bg1) 0%,var(--bg2) 50%,var(--bg3) 100%);}
.lamp{
  position:absolute;width:16px;height:16px;border-radius:50%;
  background: radial-gradient(circle, rgba(255,255,255,.95) 0%, rgba(255,255,255,.5) 40%, transparent 70%);
  mix-blend-mode:screen;opacity:.65;animation:flick 2.2s infinite alternate;
  box-shadow:0 0 18px rgba(255,255,255,.9),0 0 36px currentColor;
}
.c1{color:#00eaff;animation-delay:0s}
.c2{color:#ff3af2;animation-delay:.6s}
.c3{color:#ffd93a;animation-delay:1.1s}
@keyframes flick{
  0%{opacity:.25; transform:scale(.95)}
  50%{opacity:1;   transform:scale(1.06)}
  100%{opacity:.55;transform:scale(1.0)}
}

#app{position:relative;min-height:100vh;color:var(--text);padding:12px 16px 0}
header{display:flex;gap:10px;justify-content:space-between;margin-top:6px}
.stat{
  background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);
  border-radius:14px;padding:8px 12px;backdrop-filter:blur(4px);min-width:112px
}
.stat .label{opacity:.8;font-size:12px}
.stat .value{font-weight:800}

#gauge{
  position:relative;margin:calc(var(--safeTop)) auto 0;
  height:calc(100vh - var(--safeTop) - var(--safeBot));
  display:flex;align-items:center;justify-content:center;max-width:520px
}
#tube{
  position:relative;width:min(var(--tubeW),195px);height:100%;border-radius:999px;
  background:linear-gradient(180deg,rgba(255,255,255,.18),rgba(255,255,255,.08));
  box-shadow: inset 0 0 26px var(--glassGlow), 0 0 0 2px rgba(255,255,255,.08);
  overflow:hidden;
}
.ticks{
  position:absolute;inset:0;
  background:repeating-linear-gradient(
    to top,
    transparent 0,
    transparent calc((100%/15) - 3px),
    rgba(255,255,255,.3) calc((100%/15) - 3px),
    rgba(255,255,255,.3) calc(100%/15)
  );
}
#fill{
  position:absolute;left:0;right:0;bottom:0;height:0%;
  background:linear-gradient(180deg,rgba(255,255,255,.85),rgba(255,255,255,.22));
  box-shadow: inset 0 0 20px rgba(255,255,255,.35);
  transition:height .7s cubic-bezier(.2,.8,.2,1);
}
#glow{
  pointer-events:none;position:absolute;left:8%;right:8%;
  height:7%;bottom:0;opacity:0;
  box-shadow:0 0 32px 8px var(--accent);
  border-radius:999px;transition: all .4s ease;
}
#impact-pad{
  position:absolute;left:18%;right:18%;bottom:2.5%;
  height:42px;border-radius:22px;background:rgba(255,255,255,.12);
  box-shadow: inset 0 0 18px rgba(255,255,255,.4);
}

/* ДОК (двухрядный) */
#dock{
  position:fixed;left:0;right:0;bottom: env(safe-area-inset-bottom);
  padding:12px 16px 16px;
  display:flex;flex-direction:column;gap:10px;
  background:linear-gradient(180deg, transparent 0%, rgba(0,0,0,.25) 100%);
}
#dock .row{display:flex;gap:10px}
button{
  flex:1; height:52px; border-radius:14px; font-weight:800; font-size:16px;
  background:#2a2742; color:#fff; border:1px solid rgba(255,255,255,.12);
  box-shadow: 0 6px 18px rgba(0,0,0,.25);
}
button.primary{background:#5a51ff}
button.ghost{background:transparent;border-color:rgba(255,255,255,.25)}
button:active{transform:translateY(1px)}

/* Модалки */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:50}
.hidden{display:none}
.card{width:min(92vw,460px);background:#19162b;padding:16px;border-radius:16px;border:1px solid rgba(255,255,255,.1)}
.card .title{font-weight:800;margin-bottom:8px}
.card .row{display:flex;gap:8px;justify-content:flex-end;margin-top:8px}
.card input{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,.1);background:#120f1f;color:#fff;margin-top:6px}

/* История */
.history{list-style:none;margin:6px 0 0;padding:0;max-height:48vh;overflow:auto}
.history li{
  display:flex;align-items:center;justify-content:space-between;gap:10px;
  padding:10px 8px;border:1px solid rgba(255,255,255,.08);border-radius:10px;margin-bottom:8px;
  background:rgba(255,255,255,.04)
}
.history .meta{opacity:.8;font-size:12px}
.history .sum{font-weight:800}
.history .actions{display:flex;gap:6px}
.history .actions button{height:36px;font-size:14px;border-radius:10px;padding:0 10px}
